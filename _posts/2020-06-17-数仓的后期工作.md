---
layout:     post
title:      数仓的后期工作
subtitle:   
date:       2020-06-17
author:     ls_oyang
header-img: img/post-bg-BJJ.jpg
catalog: true
tags:
    
---



数仓建设前期，我们会聚焦于指标的提取，忽略很多东西，后期一些问题开始显现出来：元数据管理问题，数据质量问题，数据生命周期问题。

常常直接面临的问题是：不止我们有哪些表，有哪些字段，有些字段的有异常值吗？数据是我们想要的吗？我们能很直观地看出我们数仓的血缘关系吗？维度表越累积越大，还要每天跑，想清除一些数据又不知道清除哪一些……

这就我们数仓后期常常面临的问题：

##### 元数据管理  开源框架：apache atlas

hive hooks ,metastore listener ,
	模型定义，表、字段注释
	脚本，运行日志
	业务元数据
		业务元数据从业务角度描述了数据仓库中的数据，它提供了介于使用者和实际系统之间的语义层，使得不懂计算机技术的业务人员也能够“ 读懂”数据仓库中的数据。
		常见的业务元数据有：如维度及属性、业务过程、指标等的规范化定义，用于更好地管理和使用数据；
		数据应用元数据，如数据报表、数据产品等的配置和运行元数据。
		放在svn，git或者wiki上都可以
	血缘关系。依赖关系
		开发小工具，解析sql脚本，生成血缘关系图

##### 数据质量管理  开源框架：Apache Griffin

​	模型质量
​	复用率低下，重复建模 
​	缺乏数据战略将导致脏数据、冗余数据、数据不一致、无法整合、性能底下、可用性差、责任缺失、用户日益不满意IT的性能。
​	空值情况，枚举与设计文档是否一致，异常值
Apache Griffin
​    Define：主要负责定义数据质量统计的维度，比如数据质量统计的时间跨度、统计的目标（源端和目标端的数据数量是否一致，数据源里某一字段的非空的数量、不重复值的数量、最大值、最小值、top5的值数量等）
​    Measure：主要负责执行统计任务，生成统计结果
​    Analyze：主要负责保存与展示统计结果

##### 数据生命周期管理框架  开源框架：Apache Falcon

​	生命周期主要包含定义、生产、消费、下线四个阶段
​	过于庞大的几百亿的设备维度表
​	集群存储位置定义,数据源和处理逻辑组成,这三部分分别为由xml文件定义的实体.
​	cluster: 支持定义多个集群.
​	feed: 数据源, 支持类型包括hdfs路径和hive表.
​	process: 处理逻辑,支持oozie,hive,pig和spark作为作业流引擎.