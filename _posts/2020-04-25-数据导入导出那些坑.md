---
layout:     post
title:      数据导入导出那些坑
subtitle:   数仓经验
date:       2020-04-25
author:     ls_oyang
header-img: img/post-bg-BJJ.jpg
catalog: true
tags:
    -数仓 -数据导出
---



数据在各种存储介质中流转总是会出现各种各样的bug，不管你是用sqoop还是dataX，而人又总是健忘的，这次踩了坑若不总结，记录，难免下次还得重蹈覆辙，此外也可以给他人以借鉴。

下面简单记录一下hive数仓ads表导出到mysql经常会报错的集中状况

#### 1、字段名称和个数

有些工具要求hive中字段名字和个数要和mysql一模一样，否则就有问题，

#### 2、主键字段值的大小写

hive中表区分大小写，而mysql中则要看你建表的情况了，若是忽略大小写的建表方法，hive中过来的数据会被当做主键重复，当然无法插入

#### 3、前后空格

hive中会保存前后空格，到mysql也会出现和上述同样的问题

#### 4、乱码问题

数据中出现❤这样的东东在hive是运行存在的，可是到了mysql就会出问题了，怎么检查？自定义函数 ismessycode()进行检查吧，怎么写？百度吧

#### 5、字段长度问题

hive中没有主键一说，varchar(1000)都是可以的，但mysql中主键长度是有限制的，测试是varchar(254)，若hive中字段过长，自然出问题



这些问题不是什么高大上的问题，但若你没踩过这坑，它也有可能花你一上午的时间，甚至一整天，若你知道这坑，对症下药，药到病除，数据工作，重在细节，万万马虎不得。